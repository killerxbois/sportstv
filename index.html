import { useState, useEffect } from "react"; import { Card, CardContent } from "@/components/ui/card"; import { Button } from "@/components/ui/button"; import { Input } from "@/components/ui/input"; import { SheetDB } from "@/lib/sheetdb"; import { useTranslation } from "react-i18next"; import "@/styles/global.css"; import { Toggle } from "@/components/ui/toggle"; import { Fullscreen, FullscreenExit } from "lucide-react"; import { installPWA } from "@/utils/pwaInstaller";

export default function LiveSports() { const [channels, setChannels] = useState([]); const [search, setSearch] = useState(""); const [darkMode, setDarkMode] = useState(false); const [fullscreen, setFullscreen] = useState(false); const { t, i18n } = useTranslation();

useEffect(() => { async function fetchChannels() { const data = await SheetDB.get("https://sheetdb.io/api/v1/xa79t46xfl9s0"); setChannels(data); } fetchChannels(); const interval = setInterval(fetchChannels, 30000); return () => clearInterval(interval); }, []);

const toggleFullscreen = () => { if (!document.fullscreenElement) { document.documentElement.requestFullscreen(); setFullscreen(true); } else { document.exitFullscreen(); setFullscreen(false); } };

return ( <div className={container mx-auto p-4 ${darkMode ? "dark" : "light"}}> <div className="flex justify-between items-center mb-4"> <Input placeholder={t("Search for sports...")} value={search} onChange={(e) => setSearch(e.target.value)} /> <select onChange={(e) => i18n.changeLanguage(e.target.value)} className="border p-2 rounded" > <option value="en">English</option> <option value="es">Español</option> <option value="fr">Français</option> </select> <Toggle onClick={() => setDarkMode(!darkMode)}> {darkMode ? "🌙" : "☀️"} </Toggle> <Button onClick={installPWA}>{t("Install App")}</Button> <Button onClick={toggleFullscreen}> {fullscreen ? <FullscreenExit /> : <Fullscreen />} </Button> </div> <div className="categories flex space-x-4 mb-4"> <Button>{t("Football")}</Button> <Button>{t("Cricket")}</Button> <Button>{t("NBA")}</Button> </div> <div className="grid grid-cols-2 md:grid-cols-4 gap-4 netflix-style"> {channels .filter((channel) => channel.name.toLowerCase().includes(search.toLowerCase()) ) .map((channel) => ( <Card key={channel.id} className="p-2"> <CardContent> <h3 className="text-lg font-bold">{channel.name}</h3> <Button onClick={() => window.open(channel.link, "_blank")} className="mt-2" > {t("Watch Now")} </Button> </CardContent> </Card> ))} </div> </div> ); }

